# SVF-PropDbReader

## Overview

**SVF-PropDbReader** is a .NET library for reading and extracting property database (PropDb) information from SVF (Simple Vector Format) files. SVF is the proprietary 3D model format used by Autodesk in the Autodesk Platform Services (APS) Viewer (formerly Forge Viewer). This library enables developers to programmatically access and analyze property data embedded in SVF models, which is essential for BIM, CAD, and digital twin applications.

SVF files are typically generated by Autodesk tools and are used to stream 3D models efficiently in web applications. The PropDb is a key component of SVF, storing metadata and properties for all model elements.

## Features

- Read and parse PropDb from SVF packages
- Extract properties for model elements (e.g., name, category, custom attributes)
- Support for manifest and property database structure
- Download and manage SVF/PropDb resources
- Designed for integration with APS/Forge workflows

## Installation

Add the NuGet package to your project:

```shell
# Using .NET CLI
 dotnet add package SVF.PropDbReader

# Or using Package Manager
 Install-Package SVF.PropDbReader
```

## Usage

### 1. Reading Properties from a Local Property Database (.sdb)

```csharp
using SVF.PropDbReader;

string dbPath = @"C:\path\to\your\properties.sdb";

using var reader = new PropDbReader(dbPath);

// Get properties for a specific dbId (e.g., 1)
var props = await reader.GetPropertiesForDbIdAsync(1);

foreach (var prop in props)
{
    Console.WriteLine($"{prop.Key}: {prop.Value}");
}
```

### 2. Downloading and Reading Properties from Autodesk APS (by URN)

```csharp
using SVF.PropDbReader;

string accessToken = "<YOUR_ACCESS_TOKEN>";
string urn = "<YOUR_MODEL_URN>";

using var reader = new PropDbReader(accessToken, urn);

// Get properties for a specific dbId (e.g., 1)
var props = await reader.GetPropertiesForDbIdAsync(1);

foreach (var prop in props)
{
    Console.WriteLine($"{prop.Key}: {prop.Value}");
}
```

## API Reference

### `PropDbReader`

- `PropDbReader(string dbPath)` – Initializes the reader with the path to the property database file (.sdb).
- `PropDbReader(string accessToken, string urn)` – Initializes the reader with an APS access token and model URN.
- `Task<Dictionary<string, object>> GetPropertiesForDbIdAsync(int dbId)` – Gets all properties for a given database ID asynchronously.

### `DbDownloader`

- `static void DownloadAndExtract(string svfUrl, string outputPath)` – Downloads and extracts PropDb.

### `ManifestHelper`

- Utilities for reading and parsing SVF manifest files.

## Contributing

Contributions are welcome! Please open issues or submit pull requests for bug fixes, new features, or documentation improvements.

## License

This project is licensed under the Apache License 2.0. See the [LICENSE](LICENSE) file for details.

## References

- [Autodesk Platform Services (APS) Viewer](https://aps.autodesk.com/en/docs/viewer/)
- [svf-utils](https://github.com/petrbroz/svf-utils)
- [aps-sdk-node](https://github.com/petrbroz/aps-sdk-node/tree/develop)
- [aps-sdk-net](https://github.com/autodesk-platform-services/aps-sdk-net)
